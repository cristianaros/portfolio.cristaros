import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.DiEladB3.js";const l=20,a=14,D=140,R=5,T=60,v=4,w="#43523d",S="#9bbc0f",m="#0f380f",G="#8bac0f";function j(){const c=Math.floor(l/2)-v,i=Math.floor(l/2),d=[];for(let s=0;s<v;s++)d.push({x:c+(v-1-s),y:i});return d}function N(c){let i;do i={x:Math.floor(Math.random()*l),y:Math.floor(Math.random()*l)};while(c.some(d=>d.x===i.x&&d.y===i.y));return i}function I(c,i,d){const s=c.getContext("2d");if(!s)return;const h=l*a,b=l*a;s.fillStyle=S,s.fillRect(0,0,h,b),s.fillStyle=G;for(let f=0;f<l;f++)for(let r=0;r<l;r++)s.fillRect(f*a,r*a,1,1);s.fillStyle=m,s.fillRect(d.x*a+2,d.y*a+2,a-4,a-4),i.forEach((f,r)=>{s.fillStyle=r===0?m:w,s.fillRect(f.x*a+1,f.y*a+1,a-2,a-2)})}function F(){const c=u.useRef(null),[i,d]=u.useState("menu"),[s,h]=u.useState(0),[b,f]=u.useState(()=>{if(typeof window<"u"){const e=localStorage.getItem("snake-high-score");return e?parseInt(e,10):0}return 0}),r=u.useRef({snake:j(),food:{x:15,y:10},direction:"RIGHT",nextDirection:"RIGHT",speed:D,score:0,loopId:null,state:"menu"});u.useEffect(()=>{const e=r.current;e.snake=j(),e.food=N(e.snake),c.current&&I(c.current,e.snake,e.food)},[]);const p=()=>{r.current.loopId!==null&&(clearInterval(r.current.loopId),r.current.loopId=null)},E=()=>{const e=r.current;p(),e.state="gameover",d("gameover"),e.score>parseInt(localStorage.getItem("snake-high-score")||"0",10)&&(localStorage.setItem("snake-high-score",String(e.score)),f(e.score))},k=()=>{const e=r.current;if(e.state!=="playing")return;const o=[...e.snake],n={...o[0]};switch(e.direction=e.nextDirection,e.direction){case"UP":n.y-=1;break;case"DOWN":n.y+=1;break;case"LEFT":n.x-=1;break;case"RIGHT":n.x+=1;break}if(n.x<0||n.x>=l||n.y<0||n.y>=l){E();return}if(o.some(x=>x.x===n.x&&x.y===n.y)){E();return}o.unshift(n),n.x===e.food.x&&n.y===e.food.y?(e.score+=10,h(e.score),e.food=N(o),e.speed=Math.max(T,e.speed-R),p(),e.loopId=window.setInterval(k,e.speed)):o.pop(),e.snake=o,c.current&&I(c.current,e.snake,e.food)},y=()=>{const e=r.current;p(),e.snake=j(),e.food=N(e.snake),e.direction="RIGHT",e.nextDirection="RIGHT",e.speed=D,e.score=0,e.state="playing",h(0),d("playing"),c.current&&I(c.current,e.snake,e.food),e.loopId=window.setInterval(k,e.speed)};u.useEffect(()=>{const e=o=>{const n=r.current;if(n.state==="menu"||n.state==="gameover"){(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),y());return}const x=n.direction;switch(o.key){case"ArrowUp":case"w":o.preventDefault(),x!=="DOWN"&&(n.nextDirection="UP");break;case"ArrowDown":case"s":o.preventDefault(),x!=="UP"&&(n.nextDirection="DOWN");break;case"ArrowLeft":case"a":o.preventDefault(),x!=="RIGHT"&&(n.nextDirection="LEFT");break;case"ArrowRight":case"d":o.preventDefault(),x!=="LEFT"&&(n.nextDirection="RIGHT");break}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),p()}},[]);const g=e=>{const o=r.current;if(o.state!=="playing")return;const n=o.direction;e==="UP"&&n!=="DOWN"&&(o.nextDirection="UP"),e==="DOWN"&&n!=="UP"&&(o.nextDirection="DOWN"),e==="LEFT"&&n!=="RIGHT"&&(o.nextDirection="LEFT"),e==="RIGHT"&&n!=="LEFT"&&(o.nextDirection="RIGHT")};return t.jsx("div",{className:"flex items-center justify-center h-full w-full overflow-auto py-6",children:t.jsxs("div",{className:"bg-[#2c2c3a] rounded-[2rem] p-6 shadow-2xl border border-[#45475a]",style:{minWidth:"340px"},children:[t.jsx("div",{className:"text-center mb-3",children:t.jsx("span",{className:"text-[13px] tracking-[0.3em] uppercase text-[#6c7086] font-bold",children:"PORTFOLIO"})}),t.jsxs("div",{className:"bg-[#9bbc0f] rounded-lg p-3 border-4 border-[#1a1a2e] shadow-inner",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:"11px",color:m,fontWeight:"bold"},children:"SNAKE"}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:"11px",color:m},children:String(s).padStart(4,"0")})]}),t.jsxs("div",{className:"relative",children:[t.jsx("canvas",{ref:c,width:l*a,height:l*a,className:"rounded border-2 border-[#0f380f] mx-auto block",style:{imageRendering:"pixelated"}}),i!=="playing"&&t.jsxs("div",{className:"absolute inset-0 rounded flex flex-col items-center justify-center cursor-pointer",style:{backgroundColor:`${S}ee`},onClick:y,children:[t.jsx("div",{style:{fontFamily:"monospace",fontSize:"16px",color:m,fontWeight:"bold",marginBottom:"8px"},children:i==="menu"?"ðŸ SNAKE":"GAME OVER"}),i==="gameover"&&t.jsxs("div",{style:{fontFamily:"monospace",fontSize:"12px",color:w,marginBottom:"4px"},children:["Score: ",s]}),t.jsxs("div",{style:{fontFamily:"monospace",fontSize:"11px",color:w,marginBottom:"4px"},children:["High: ",Math.max(b,s)]}),t.jsx("div",{style:{fontFamily:"monospace",fontSize:"10px",color:m,marginTop:"8px"},children:"Clic o ENTER para jugar"})]})]})]}),t.jsxs("div",{className:"flex flex-col items-center mt-4 gap-1",children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-10 h-10"}),t.jsx("button",{"aria-label":"Arriba",onMouseDown:()=>g("UP"),className:"w-10 h-10 rounded-t-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–²"}),t.jsx("div",{className:"w-10 h-10"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{"aria-label":"Izquierda",onMouseDown:()=>g("LEFT"),className:"w-10 h-10 rounded-l-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â—„"}),t.jsx("div",{className:"w-10 h-10 rounded bg-[#313244] flex items-center justify-center",children:t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#45475a]"})}),t.jsx("button",{"aria-label":"Derecha",onMouseDown:()=>g("RIGHT"),className:"w-10 h-10 rounded-r-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–º"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-10 h-10"}),t.jsx("button",{"aria-label":"Abajo",onMouseDown:()=>g("DOWN"),className:"w-10 h-10 rounded-b-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–¼"}),t.jsx("div",{className:"w-10 h-10"})]})]}),t.jsxs("div",{className:"flex justify-center gap-8 mt-3",children:[t.jsx("button",{"aria-label":"BotÃ³n A (Iniciar)",onClick:y,className:"w-10 h-10 rounded-full bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[10px] text-[#cdd6f4] font-bold transition-colors",children:"A"}),t.jsx("button",{"aria-label":"BotÃ³n B",className:"w-10 h-10 rounded-full bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[10px] text-[#cdd6f4] font-bold transition-colors",children:"B"})]}),t.jsx("div",{className:"text-center mt-3 text-[10px] text-[#6c7086]",children:"WASD / Flechas Â· ENTER o Clic para jugar"})]})})}export{F as default};

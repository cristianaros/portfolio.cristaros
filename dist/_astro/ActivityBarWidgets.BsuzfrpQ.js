import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.DiEladB3.js";const E={theme:"dark",fontSize:"medium",showLineNumbers:!0,terminalVisible:!0,fontFamily:"jetbrains"};function W(){try{const n=localStorage.getItem("portfolio-settings");if(n)return{...E,...JSON.parse(n)};const c=localStorage.getItem("portfolio-theme");if(c==="light"||c==="dark")return{...E,theme:c}}catch{}return E}function H(n){localStorage.setItem("portfolio-settings",JSON.stringify(n)),localStorage.setItem("portfolio-theme",n.theme)}function F(n){document.documentElement.setAttribute("data-theme",n.theme);const c={small:"12px",medium:"14px",large:"16px"},s={jetbrains:'"JetBrains Mono", monospace',firacode:'"Fira Code", monospace',cascadia:'"Cascadia Code", monospace'};document.body.style.fontSize=c[n.fontSize],document.body.style.fontFamily=s[n.fontFamily],document.querySelectorAll(".line-number").forEach(i=>{i.style.display=n.showLineNumbers?"":"none"}),window.dispatchEvent(new CustomEvent("portfolio-settings",{detail:n}))}const T=({label:n,description:c,checked:s,onChange:i})=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-1 group",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[13px] text-vscode-text",children:n}),c&&e.jsx("div",{className:"text-[11px] text-vscode-textMuted",children:c})]}),e.jsx("button",{"aria-label":n,onClick:()=>i(!s),className:`relative w-9 h-5 rounded-full transition-colors ${s?"bg-vscode-accent":"bg-vscode-surface1"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${s?"translate-x-4":""}`})})]}),M=({label:n,description:c,value:s,options:i,onChange:d})=>e.jsxs("div",{className:"py-2 px-1",children:[e.jsx("div",{className:"text-[13px] text-vscode-text mb-1",children:n}),c&&e.jsx("div",{className:"text-[11px] text-vscode-textMuted mb-2",children:c}),e.jsx("div",{className:"flex gap-1",children:i.map(r=>e.jsx("button",{onClick:()=>d(r.value),className:`px-3 py-1 text-[12px] rounded border transition-colors ${s===r.value?"bg-vscode-accent/20 border-vscode-accent text-vscode-accent":"bg-vscode-surface0/30 border-vscode-border text-vscode-textMuted hover:text-vscode-text hover:border-vscode-textSubtle"}`,children:r.label},r.value))})]});function P(){const[n,c]=o.useState(!1),[s,i]=o.useState(E);o.useEffect(()=>{const r=W();i(r),F(r)},[]);const d=o.useCallback((r,p)=>{i(N=>{const b={...N,[r]:p};if(H(b),F(b),r==="theme"){const x=document.getElementById("icon-sun"),u=document.getElementById("icon-moon");x&&u&&(x.style.display=p==="dark"?"block":"none",u.style.display=p==="light"?"block":"none")}return b})},[]);return e.jsxs(e.Fragment,{children:[e.jsx("button",{"aria-label":"ConfiguraciÃ³n",onClick:()=>c(!n),className:`w-10 h-10 flex items-center justify-center transition-colors ${n?"text-vscode-text bg-vscode-surface0/30":"text-vscode-textMuted hover:text-vscode-text hover:bg-vscode-surface0/30"}`,title:"ConfiguraciÃ³n",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",onClick:()=>c(!1),children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"relative ml-[48px] w-80 h-full border-r border-vscode-border shadow-2xl overflow-y-auto animate-slide-in-left",onClick:r=>r.stopPropagation(),style:{animation:"slideInLeft 0.2s ease-out",backgroundColor:"rgb(var(--vscode-sidebar, 24 24 37))",color:"rgb(var(--vscode-text, 205 214 244))"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-vscode-border sticky top-0 z-10",style:{backgroundColor:"rgb(var(--vscode-sidebar, 24 24 37))"},children:[e.jsx("span",{className:"text-[13px] font-semibold text-vscode-text uppercase tracking-wider",children:"ConfiguraciÃ³n"}),e.jsx("button",{"aria-label":"Cerrar configuraciÃ³n",onClick:()=>c(!1),className:"w-6 h-6 flex items-center justify-center rounded hover:bg-vscode-surface0/50 text-vscode-textMuted hover:text-vscode-text transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-4 py-3 space-y-1",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wider text-vscode-textMuted font-semibold pb-1 pt-1",children:"Apariencia"}),e.jsx(M,{label:"Tema de Color",description:"Cambia entre modo oscuro y claro",value:s.theme,options:[{value:"dark",label:"ðŸŒ™ Oscuro"},{value:"light",label:"â˜€ï¸ Claro"}],onChange:r=>d("theme",r)}),e.jsx(M,{label:"TamaÃ±o de Fuente",description:"Ajusta el tamaÃ±o del texto en el editor",value:s.fontSize,options:[{value:"small",label:"12px"},{value:"medium",label:"14px"},{value:"large",label:"16px"}],onChange:r=>d("fontSize",r)}),e.jsx(M,{label:"Fuente",description:"Familia tipogrÃ¡fica del editor",value:s.fontFamily,options:[{value:"jetbrains",label:"JetBrains"},{value:"firacode",label:"Fira Code"},{value:"cascadia",label:"Cascadia"}],onChange:r=>d("fontFamily",r)}),e.jsx("div",{className:"border-t border-vscode-border/50 my-2"}),e.jsx("div",{className:"text-[11px] uppercase tracking-wider text-vscode-textMuted font-semibold pb-1 pt-1",children:"Editor"}),e.jsx(T,{label:"NÃºmeros de LÃ­nea",description:"Mostrar u ocultar los nÃºmeros de lÃ­nea",checked:s.showLineNumbers,onChange:r=>d("showLineNumbers",r)}),e.jsx(T,{label:"Terminal Visible",description:"Muestra u oculta el panel de terminal",checked:s.terminalVisible,onChange:r=>d("terminalVisible",r)}),e.jsx("div",{className:"border-t border-vscode-border/50 my-2"}),e.jsx("div",{className:"text-[11px] uppercase tracking-wider text-vscode-textMuted font-semibold pb-1 pt-1",children:"Acerca de"}),e.jsxs("div",{className:"bg-vscode-surface0/20 rounded-lg p-3 text-[12px] space-y-1.5",children:[e.jsx("div",{className:"text-vscode-accent font-semibold",children:"Portfolio v1.0"}),e.jsxs("div",{className:"text-vscode-textMuted",children:["Construido por ",e.jsx("span",{className:"text-vscode-accent",children:"Cristian Aros"})]}),e.jsx("div",{className:"text-vscode-textMuted",children:"con Astro + React + TailwindCSS"})]}),e.jsx("div",{className:"border-t border-vscode-border/50 my-2"}),e.jsx("div",{className:"py-2 px-1",children:e.jsx("div",{className:"text-[11px] text-vscode-textMuted italic text-center opacity-60",children:"â†‘ â†‘ â†“ â†“ â† â†’ â† â†’ B A"})})]})]})]}),e.jsx("style",{children:`
        @keyframes slideInLeft {
          from { transform: translateX(-100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
      `})]})}const m=20,l=14,O=150,K=5,_=60,L="#43523d",z="#9bbc0f",y="#0f380f",U="#8bac0f";function V({onClose:n}){const c=o.useRef(null),[s,i]=o.useState("menu"),[d,r]=o.useState(0),[p,N]=o.useState(0),b=o.useRef([{x:10,y:10}]),x=o.useRef("RIGHT"),u=o.useRef("RIGHT"),k=o.useRef({x:15,y:10}),j=o.useRef(O),f=o.useRef(null),S=o.useRef(0);o.useEffect(()=>{const a=localStorage.getItem("snake-high-score");a&&N(parseInt(a,10))},[]);const C=o.useCallback(()=>{let a;do a={x:Math.floor(Math.random()*m),y:Math.floor(Math.random()*m)};while(b.current.some(t=>t.x===a.x&&t.y===a.y));k.current=a},[]),v=o.useCallback(()=>{const a=c.current;if(!a)return;const t=a.getContext("2d");if(!t)return;const h=m*l,B=m*l;t.fillStyle=z,t.fillRect(0,0,h,B),t.fillStyle=U;for(let g=0;g<m;g++)for(let w=0;w<m;w++)t.fillRect(g*l,w*l,1,1);const D=k.current;t.fillStyle=y,t.fillRect(D.x*l+2,D.y*l+2,l-4,l-4),b.current.forEach((g,w)=>{t.fillStyle=w===0?y:L,t.fillRect(g.x*l+1,g.y*l+1,l-2,l-2)})},[]),I=o.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null);const a=S.current;a>p&&(N(a),localStorage.setItem("snake-high-score",String(a))),i("gameover")},[p]),R=o.useCallback(()=>{const a=[...b.current],t={...a[0]};switch(x.current=u.current,x.current){case"UP":t.y-=1;break;case"DOWN":t.y+=1;break;case"LEFT":t.x-=1;break;case"RIGHT":t.x+=1;break}if(t.x<0||t.x>=m||t.y<0||t.y>=m){I();return}if(a.some(h=>h.x===t.x&&h.y===t.y)){I();return}a.unshift(t),t.x===k.current.x&&t.y===k.current.y?(S.current+=10,r(S.current),C(),j.current=Math.max(_,j.current-K),f.current&&(clearInterval(f.current),f.current=window.setInterval(R,j.current))):a.pop(),b.current=a,v()},[v,I,C]),A=o.useCallback(()=>{b.current=[{x:10,y:10}],x.current="RIGHT",u.current="RIGHT",j.current=O,S.current=0,r(0),C(),i("playing"),v(),f.current&&clearInterval(f.current),f.current=window.setInterval(R,j.current)},[R,C,v]);return o.useEffect(()=>{const a=t=>{if(t.key==="Escape"){n();return}if(s==="menu"||s==="gameover"){(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),A());return}const h=x.current;switch(t.key){case"ArrowUp":case"w":t.preventDefault(),h!=="DOWN"&&(u.current="UP");break;case"ArrowDown":case"s":t.preventDefault(),h!=="UP"&&(u.current="DOWN");break;case"ArrowLeft":case"a":t.preventDefault(),h!=="RIGHT"&&(u.current="LEFT");break;case"ArrowRight":case"d":t.preventDefault(),h!=="LEFT"&&(u.current="RIGHT");break}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a),f.current&&clearInterval(f.current)}},[s,A,n]),o.useEffect(()=>{s==="menu"&&v()},[s,v]),e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:n,children:[e.jsx("div",{className:"relative",onClick:a=>a.stopPropagation(),style:{animation:"scaleIn 0.3s ease-out"},children:e.jsxs("div",{className:"bg-[#2c2c3a] rounded-[2rem] p-6 shadow-2xl border border-[#45475a]",style:{minWidth:"360px"},children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("span",{className:"text-[13px] tracking-[0.3em] uppercase text-[#6c7086] font-bold",children:"PORTFOLIO"})}),e.jsxs("div",{className:"bg-[#9bbc0f] rounded-lg p-3 border-4 border-[#1a1a2e] shadow-inner",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[e.jsx("span",{style:{fontFamily:"monospace",fontSize:"11px",color:y,fontWeight:"bold"},children:"SNAKE"}),e.jsx("span",{style:{fontFamily:"monospace",fontSize:"11px",color:y},children:String(d).padStart(4,"0")})]}),e.jsx("canvas",{ref:c,width:m*l,height:m*l,className:"rounded border-2 border-[#0f380f] mx-auto block",style:{imageRendering:"pixelated"}}),s!=="playing"&&e.jsxs("div",{className:"absolute rounded-lg flex flex-col items-center justify-center",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:m*l-20,backgroundColor:`${z}ee`,padding:"20px",zIndex:10},children:[e.jsx("div",{style:{fontFamily:"monospace",fontSize:"16px",color:y,fontWeight:"bold",marginBottom:"8px"},children:s==="menu"?"ðŸ SNAKE":"GAME OVER"}),s==="gameover"&&e.jsxs("div",{style:{fontFamily:"monospace",fontSize:"12px",color:L,marginBottom:"4px"},children:["Score: ",d]}),e.jsxs("div",{style:{fontFamily:"monospace",fontSize:"11px",color:L,marginBottom:"4px"},children:["High: ",Math.max(p,d)]}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:"10px",color:y,marginTop:"8px"},children:"[ENTER] para jugar"})]})]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-10 h-10"}),e.jsx("button",{"aria-label":"Arriba",onMouseDown:()=>{x.current!=="DOWN"&&(u.current="UP")},className:"w-10 h-10 rounded-t-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–²"}),e.jsx("div",{className:"w-10 h-10"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{"aria-label":"Izquierda",onMouseDown:()=>{x.current!=="RIGHT"&&(u.current="LEFT")},className:"w-10 h-10 rounded-l-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â—„"}),e.jsx("div",{className:"w-10 h-10 rounded bg-[#313244] flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#45475a]"})}),e.jsx("button",{"aria-label":"Derecha",onMouseDown:()=>{x.current!=="LEFT"&&(u.current="RIGHT")},className:"w-10 h-10 rounded-r-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–º"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-10 h-10"}),e.jsx("button",{"aria-label":"Abajo",onMouseDown:()=>{x.current!=="UP"&&(u.current="DOWN")},className:"w-10 h-10 rounded-b-lg bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[#cdd6f4] transition-colors",children:"â–¼"}),e.jsx("div",{className:"w-10 h-10"})]})]}),e.jsxs("div",{className:"flex justify-center gap-8 mt-3",children:[e.jsx("button",{"aria-label":"BotÃ³n A (Iniciar)",onClick:A,className:"w-10 h-10 rounded-full bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[10px] text-[#cdd6f4] font-bold transition-colors",children:"A"}),e.jsx("button",{"aria-label":"BotÃ³n B (Cancelar/Salir)",onClick:n,className:"w-10 h-10 rounded-full bg-[#45475a] hover:bg-[#585b70] active:bg-[#313244] flex items-center justify-center text-[10px] text-[#cdd6f4] font-bold transition-colors",children:"B"})]}),e.jsx("div",{className:"text-center mt-3 text-[10px] text-[#6c7086]",children:"WASD / Flechas Â· ESC para salir"})]})}),e.jsx("style",{children:`
        @keyframes scaleIn {
          from { transform: scale(0.8); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
      `})]})}const G=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];function X(){const[n,c]=o.useState(!1);return o.useEffect(()=>{let s=0;const i=d=>{const r=G[s];d.key===r||d.key.toLowerCase()===r?(s++,s===G.length&&(c(!0),s=0)):s=0};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[]),e.jsxs(e.Fragment,{children:[e.jsx(P,{}),n&&e.jsx(V,{onClose:()=>c(!1)})]})}export{X as default};
